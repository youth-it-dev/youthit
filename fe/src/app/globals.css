@import "tailwindcss";
@import "tw-animate-css";

/* tailwind color 변수 정의 */
@theme {
  /* font families */
  --font-noto: var(--font-noto-sans-kr), system-ui, sans-serif;
  /* Gill Sans는 시스템(맥) 기준 + 대체 스택 */
  --font-gill: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS", sans-serif;

  /* main */
  --color-main-50: #ebf0f9;
  --color-main-100: #c4d4f3;
  --color-main-200: #98b6f1;
  --color-main-300: #6896f3;
  --color-main-400: #3375fa;
  --color-main-500: #0055ff;
  --color-main-600: #0646c6;
  --color-main-700: #0d378c;
  --color-main-800: #0e2758;
  --color-main-900: #0a1429;

  /* pink */
  --color-primary-pink: #ff006c;
  /* point color */
  --color-primary-green: #deff88;

  /* gray */
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-400: #99a1af;
  --color-gray-700: #374151;
  --color-gray-950: #030712;
  /* tailwind의 slate300 사용 */
  --color-gray-300: oklch(92.9% 0.013 255.508);
  /* tailwind의 slate400 사용 */
  --color-gray-400: oklch(70.4% 0.04 256.788);

  /* sementic */
  /* blue500 */
  --color-progress: oklch(0.623 0.214 259.815);
  /* green500 */
  --color-success: oklch(0.723 0.219 149.579);
  /* red500 */
  --color-warning-high: oklch(0.637 0.237 25.331);
  /* yellow400 */
  --color-warning-low: oklch(0.852 0.199 91.936);
  /* green500 */
  --color-warning-success: oklch(0.723 0.219 149.579);

  --color-kakao: #fee500;
}

/* iOS Safe Area 지원 */
.pb-safe {
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 1.25rem) !important;
}

.pt-safe {
  padding-top: env(safe-area-inset-top, 0px) !important;
}

/* 마우스로 포커스된 요소의 기본 링 숨기기 (키보드 접근성 유지) */
:focus:not(:focus-visible) {
  outline: none;
}

/* 스크롤바 숨김 유틸리티 */
.scrollbar-hide {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Chrome, Safari and Opera */
}

/* 이미지 로드 전 공백 방지 */
.prose img {
  min-height: 0 !important;
}

.prose img:not([src]),
.prose img[src=""] {
  display: none;
}

/* react-notion-x 폰트 오버라이드 (Windows Chrome 호환성) */
/* react-notion-x의 모든 요소에 Noto Sans 강제 적용 */
.notion {
  --notion-font: var(--font-noto-sans-kr), system-ui, sans-serif;
}

/* react-notion-x 이미지 wrapper 오버라이드 */
/* Asset 컴포넌트가 block_height를 받아서 div의 height를 고정하는데, 이를 오버라이드하여 이미지 원본 크기에 맞춤 */
.notion-asset-wrapper-image > div {
  height: auto !important;
  min-height: 0 !important;
}

.notion-asset-wrapper-image img {
  height: auto !important;
  object-fit: unset !important;
  max-height: none !important;
}

.notion-asset-caption {
  display: none !important;
}

.notion-hash-link {
  display: none !important;
}

/* 커스텀 토스트 위치 조정 - 하단 네비게이션 바로 위 */
.custom-toaster[data-sonner-toaster],
.custom-toaster[data-sonner-toaster][data-position="bottom-center"],
[data-sonner-toaster].custom-toaster,
[data-sonner-toaster][data-position="bottom-center"].custom-toaster {
  bottom: 80px !important;
}

/* iOS Safe Area 고려 */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .custom-toaster[data-sonner-toaster],
  .custom-toaster[data-sonner-toaster][data-position="bottom-center"],
  [data-sonner-toaster].custom-toaster,
  [data-sonner-toaster][data-position="bottom-center"].custom-toaster {
    bottom: calc(80px + env(safe-area-inset-bottom)) !important;
  }
}

/* GIPHY Grid 스타일 */
.giphy-grid {
  width: 100% !important;
}

.giphy-grid > div {
  display: grid !important;
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 8px !important;
}

.giphy-grid img {
  width: 100% !important;
  height: auto !important;
  object-fit: cover !important;
  border-radius: 8px !important;
  cursor: pointer !important;
  transition: transform 0.2s ease !important;
}

.giphy-grid img:hover {
  transform: scale(1.02) !important;
}

/* iOS PWA 댓글 GIF 최적화 */
/* 댓글 내 이미지의 깜빡임 방지 및 레이아웃 시프트 방지 */
.prose img,
[class*="prose"] img {
  /* 하드웨어 가속 활성화 */
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  /* 레이아웃 재계산 최소화 */
  will-change: auto;
  /* 이미지 로드 시 레이아웃 시프트 방지 */
  contain: layout style paint;
  /* iOS Safari에서 이미지 리플로우 방지 */
  -webkit-transform: translateZ(0);
  /* 이미지 크기 고정으로 레이아웃 시프트 방지 */
  min-height: 0;
  max-height: 300px;
  object-fit: contain;
}

/* 텍스트 에디터 이미지 스타일 (댓글 스타일 제외) */
[contenteditable="true"] img,
[contenteditable="true"].prose img,
.prose[contenteditable="true"] img {
  max-height: none !important;
  object-fit: contain !important;
  width: 100% !important;
  height: auto !important;
  border-radius: 0.5rem !important;
  display: block !important;
}

/* iOS PWA에서 댓글 컨테이너 최적화 */
/* 화면 변화 시 리플로우 최소화 */
.prose,
[class*="prose"] {
  /* 레이아웃 격리 */
  contain: layout style;
  /* 하드웨어 가속 */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* 게시글 상세 페이지 컨텐츠 스타일 */
/* 이미지: 전체 너비, 중앙 정렬 제거, 마진 제거, 원본 비율 유지 */
.post-content img {
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;
  max-height: none !important;
  display: block !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  margin: 8px 0 !important;
  margin-inline: 0 !important;
  border-radius: 8px;
}

/* 텍스트: 양쪽 정렬 */
.post-content p {
  text-align: justify !important;
}
